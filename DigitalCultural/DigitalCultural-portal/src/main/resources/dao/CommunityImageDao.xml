<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.digitalculturalportal.dao.CommunityImageDao">
    <resultMap id="BasesResultMap" type="org.example.digitalculturalportal.pojo.CommunityImage">
        <id column="id" property="id"/>
        <result column="post_id" property="postId"/>
        <result column="url" property="url"/>
        <result column="upload_time" property="uploadTime"/>
    </resultMap>
    <sql id="selectFields">
        id,post_id,url,upload_time
    </sql>
    <sql id="insertFields">
        post_id,url,upload_time
    </sql>
      <!-- 记录图片url   -->
    <insert id="addImageUrl" parameterType="org.example.digitalculturalportal.pojo.CommunityImage">
        INSERT INTO community_image(<include refid="insertFields"></include>)
        VALUES(#{postId},#{url},#{uploadTime})
    </insert>
     <!-- 获取图片url列表  -->
    <select id="selectImageList" resultType="String">
        SELECT url
        FROM community_image
        WHERE post_id = #{postId}
    </select>
</mapper>