{"remainingRequest":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\babel-loader\\lib\\index.js!D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\src\\views\\login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\src\\views\\login\\index.vue","mtime":1722426088909},{"path":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\babel.config.js","mtime":1721705225479},{"path":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721705227172},{"path":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\babel-loader\\lib\\index.js","mtime":1721705226958},{"path":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721705227172},{"path":"D:\\GitHubProject\\Digital-Cultural-and-Creative-Industries\\DigitalCulturalWeb\\node_modules\\vue-loader\\lib\\index.js","mtime":1721705237380}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi8uLi9hcGkvbG9naW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBjb25maXJtUGFzc3dvcmQ6ICcnLAogICAgICBjYXB0Y2hhOiAnJywKICAgICAgLy8g55So5LqO5a2Y5YKo55Sf5oiQ55qE6aqM6K+B56CBCiAgICAgIGNhcHRjaGFJbnB1dDogJycsCiAgICAgIC8vIOeUqOaIt+i+k+WFpeeahOmqjOivgeeggQogICAgICBsb2dpbk1vZGU6IHRydWUsCiAgICAgIC8vIOm7mOiupOaYvuekuueZu+W9leihqOWNlQogICAgICBlcnJvcjogJycsCiAgICAgIHN1Y2Nlc3M6ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2VuZXJhdGVDYXB0Y2hhKCk7IC8vIOe7hOS7tuWIm+W7uuaXtueUn+aIkOmqjOivgeeggQogIH0sCiAgbWV0aG9kczogewogICAgc3dpdGNoVG9Mb2dpbjogZnVuY3Rpb24gc3dpdGNoVG9Mb2dpbigpIHsKICAgICAgdGhpcy5sb2dpbk1vZGUgPSB0cnVlOwogICAgICB0aGlzLnJlc2V0Rm9ybSgpOwogICAgfSwKICAgIHN3aXRjaFRvUmVnaXN0ZXI6IGZ1bmN0aW9uIHN3aXRjaFRvUmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMubG9naW5Nb2RlID0gZmFsc2U7CiAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICB9LAogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIGlmICghdGhpcy52YWxpZGF0ZUNhcHRjaGEoKSkgewogICAgICAgIHRoaXMuZXJyb3IgPSAnSW52YWxpZCB2ZXJpZmljYXRpb24gY29kZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubG9naW5Nb2RlKSB7CiAgICAgICAgdGhpcy5oYW5kbGVMb2dpbigpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGFuZGxlUmVnaXN0ZXIoKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUxvZ2luOiBmdW5jdGlvbiBoYW5kbGVMb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGxvZ2luKHRoaXMudXNlcm5hbWUsIHRoaXMucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn55m75b2V5oiQ5YqfJyk7CgogICAgICAgIHZhciB0b2tlbiA9ICdleUpoYkdjaU9pSklVekkxTmlKOS5leUpxZEdraU9pSTROakpoTlRKaU56bGpOalkwTXpjMU9HSXlZMkZtT1RneE16ZGtaakExTnlJc0luTjFZaUk2SWpNaUxDSnBjM01pT2lKelp5SXNJbWxoZENJNk1UY3lNalF4TlRrd01Td2laWGh3SWpveE56SXlOREU1TlRBeGZRLjFzcl9iUkhBVUJjaGpNT0tJZFdBb24wejRfMXh4REVTN3V1dVprRDJYa0EnOwogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwoKICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVnaXN0ZXI6IGZ1bmN0aW9uIGhhbmRsZVJlZ2lzdGVyKCkgewogICAgICAvLyDlrp7njrDms6jlhozpgLvovpEKICAgICAgaWYgKHRoaXMucGFzc3dvcmQgIT09IHRoaXMuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICdQYXNzd29yZHMgZG8gbm90IG1hdGNoLiBQbGVhc2UgdHJ5IGFnYWluLic7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIOWPr+S7pea3u+WKoOazqOWGjCBBUEkg6LCD55So562J5a6e6ZmF6YC76L6RCgoKICAgICAgdGhpcy5zdWNjZXNzID0gJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsISc7CiAgICB9LAogICAgZ2VuZXJhdGVDYXB0Y2hhOiBmdW5jdGlvbiBnZW5lcmF0ZUNhcHRjaGEoKSB7CiAgICAgIC8vIOeUn+aIkOmaj+acuueahOmqjOivgeeggQogICAgICB2YXIgY2hhcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonOwogICAgICB2YXIgcmVzdWx0ID0gJyc7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICAgIHJlc3VsdCArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTsKICAgICAgfQoKICAgICAgdGhpcy5jYXB0Y2hhID0gcmVzdWx0OwogICAgfSwKICAgIHJlZnJlc2hDYXB0Y2hhOiBmdW5jdGlvbiByZWZyZXNoQ2FwdGNoYSgpIHsKICAgICAgLy8g5Yi35paw6aqM6K+B56CBCiAgICAgIHRoaXMuZ2VuZXJhdGVDYXB0Y2hhKCk7CiAgICAgIHRoaXMuY2FwdGNoYUlucHV0ID0gJyc7IC8vIOa4heepuueUqOaIt+i+k+WFpeeahOmqjOivgeeggQogICAgfSwKICAgIHZhbGlkYXRlQ2FwdGNoYTogZnVuY3Rpb24gdmFsaWRhdGVDYXB0Y2hhKCkgewogICAgICAvLyDpqozor4Hpqozor4HnoIHmmK/lkKbljLnphY0KICAgICAgcmV0dXJuIHRoaXMuY2FwdGNoYUlucHV0LnRvTG93ZXJDYXNlKCkgPT09IHRoaXMuY2FwdGNoYS50b0xvd2VyQ2FzZSgpOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICB0aGlzLnVzZXJuYW1lID0gJyc7CiAgICAgIHRoaXMucGFzc3dvcmQgPSAnJzsKICAgICAgdGhpcy5jb25maXJtUGFzc3dvcmQgPSAnJzsKICAgICAgdGhpcy5jYXB0Y2hhSW5wdXQgPSAnJzsKICAgICAgdGhpcy5lcnJvciA9ICcnOwogICAgICB0aGlzLnN1Y2Nlc3MgPSAnJzsKICAgICAgdGhpcy5nZW5lcmF0ZUNhcHRjaGEoKTsgLy8g6YeN572u6aqM6K+B56CBCiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;EACAA,IADA,kBACA;IACA;MACAC,YADA;MAEAC,YAFA;MAGAC,mBAHA;MAIAC,WAJA;MAIA;MACAC,gBALA;MAKA;MACAC,eANA;MAMA;MACAC,SAPA;MAQAC;IARA;EAUA,CAZA;EAaAC,OAbA,qBAaA;IACA,uBADA,CACA;EACA,CAfA;EAgBAC;IACAC,aADA,2BACA;MACA;MACA;IACA,CAJA;IAKAC,gBALA,8BAKA;MACA;MACA;IACA,CARA;IASAC,YATA,0BASA;MACA;QACA;QACA;MACA;;MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CApBA;IAqBAC,WArBA,yBAqBA;MAAA;;MACAC;QACAC;;QACA;;QACA;QAEAC;;QACA;MACA,CAPA,EAOAC,KAPA,CAOA;QACAF;MACA,CATA;IAWA,CAjCA;IAkCAG,cAlCA,4BAkCA;MACA;MACA;QACA;QACA;MACA,CALA,CAMA;;;MACA;IACA,CA1CA;IA2CAC,eA3CA,6BA2CA;MACA;MACA;MACA;;MACA;QACAC;MACA;;MACA;IACA,CAnDA;IAoDAC,cApDA,4BAoDA;MACA;MACA;MACA,uBAHA,CAGA;IACA,CAxDA;IAyDAC,eAzDA,6BAyDA;MACA;MACA;IACA,CA5DA;IA6DAC,SA7DA,uBA6DA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,uBAPA,CAOA;IACA;EArEA;AAhBA","names":["data","username","password","confirmPassword","captcha","captchaInput","loginMode","error","success","created","methods","switchToLogin","switchToRegister","handleSubmit","handleLogin","login","console","sessionStorage","catch","handleRegister","generateCaptcha","result","refreshCaptcha","validateCaptcha","resetForm"],"sourceRoot":"src/views/login","sources":["index.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-container\">\r\n      <div class=\"switch-buttons\">\r\n        <button :class=\"{ active: loginMode }\" @click=\"switchToLogin\">Login</button>\r\n        <button :class=\"{ active: !loginMode }\" @click=\"switchToRegister\">Register</button>\r\n      </div>\r\n  \r\n      <h2 v-if=\"loginMode\">Login</h2>\r\n      <h2 v-else>Register</h2>\r\n  \r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">Username:</label>\r\n          <input type=\"text\" id=\"username\" v-model=\"username\" required>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Password:</label>\r\n          <input type=\"password\" id=\"password\" v-model=\"password\" required>\r\n        </div>\r\n  \r\n        <div v-if=\"!loginMode\" class=\"form-group\">\r\n          <label for=\"confirmPassword\">Confirm Password:</label>\r\n          <input type=\"password\" id=\"confirmPassword\" v-model=\"confirmPassword\" required>\r\n        </div>\r\n  \r\n        <div class=\"form-group\">\r\n          <label for=\"captcha\">Verification Code:</label>\r\n          <div class=\"captcha-container\">\r\n            <input type=\"text\" id=\"captcha\" v-model=\"captchaInput\" required style=\"width: 100px; height: 30px;\">\r\n            <span class=\"captcha\" v-html=\"captcha\"></span>\r\n            <button type=\"button\" @click=\"refreshCaptcha\">Refresh</button>\r\n          </div>\r\n        </div>\r\n  \r\n        <button type=\"submit\" v-if=\"loginMode\">Login</button>\r\n        <button type=\"submit\" v-else>Register</button>\r\n      </form>\r\n  \r\n      <p v-if=\"error\" class=\"error-msg\">{{ error }}</p>\r\n      <p v-if=\"success\" class=\"success-msg\">{{ success }}</p>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import {login} from '../../api/login'\r\n  export default {\r\n    data() {\r\n      return {\r\n        username: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        captcha: '', // 用于存储生成的验证码\r\n        captchaInput: '', // 用户输入的验证码\r\n        loginMode: true, // 默认显示登录表单\r\n        error: '',\r\n        success: ''\r\n      };\r\n    },\r\n    created() {\r\n      this.generateCaptcha(); // 组件创建时生成验证码\r\n    },\r\n    methods: {\r\n      switchToLogin() {\r\n        this.loginMode = true;\r\n        this.resetForm();\r\n      },\r\n      switchToRegister() {\r\n        this.loginMode = false;\r\n        this.resetForm();\r\n      },\r\n      handleSubmit() {\r\n        if (!this.validateCaptcha()) {\r\n          this.error = 'Invalid verification code. Please try again.';\r\n          return;\r\n        }\r\n  \r\n        if (this.loginMode) {\r\n          this.handleLogin();\r\n        } else {\r\n          this.handleRegister();\r\n        }\r\n      },\r\n      handleLogin() {\r\n        login(this.username, this.password).then(res => {\r\n            console.log(res.data.token)\r\n            this.$message.success('登录成功')\r\n            let token = 'eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI4NjJhNTJiNzljNjY0Mzc1OGIyY2FmOTgxMzdkZjA1NyIsInN1YiI6IjMiLCJpc3MiOiJzZyIsImlhdCI6MTcyMjQxNTkwMSwiZXhwIjoxNzIyNDE5NTAxfQ.1sr_bRHAUBchjMOKIdWAon0z4_1xxDES7uuuZkD2XkA';\r\n\r\n            sessionStorage.setItem('token', token);\r\n            this.$router.push('/');\r\n        }).catch(e => {\r\n            console.log(e)\r\n        });\r\n        \r\n      },\r\n      handleRegister() {\r\n        // 实现注册逻辑\r\n        if (this.password !== this.confirmPassword) {\r\n          this.error = 'Passwords do not match. Please try again.';\r\n          return;\r\n        }\r\n        // 可以添加注册 API 调用等实际逻辑\r\n        this.success = 'Registration successful!';\r\n      },\r\n      generateCaptcha() {\r\n        // 生成随机的验证码\r\n        const chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        let result = '';\r\n        for (let i = 0; i < 6; i++) {\r\n          result += chars[Math.floor(Math.random() * chars.length)];\r\n        }\r\n        this.captcha = result;\r\n      },\r\n      refreshCaptcha() {\r\n        // 刷新验证码\r\n        this.generateCaptcha();\r\n        this.captchaInput = ''; // 清空用户输入的验证码\r\n      },\r\n      validateCaptcha() {\r\n        // 验证验证码是否匹配\r\n        return this.captchaInput.toLowerCase() === this.captcha.toLowerCase();\r\n      },\r\n      resetForm() {\r\n        this.username = '';\r\n        this.password = '';\r\n        this.confirmPassword = '';\r\n        this.captchaInput = '';\r\n        this.error = '';\r\n        this.success = '';\r\n        this.generateCaptcha(); // 重置验证码\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  \r\n  .login-container {\r\n    max-width: 400px;\r\n    margin: 0 auto;\r\n    margin-top: 100px;\r\n    margin-bottom: 140px;\r\n    padding: 20px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n    background-color: #f9f9f9;\r\n    text-align: center;\r\n  }\r\n  \r\n  .switch-buttons {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom: 10px;\r\n  }\r\n  \r\n  .switch-buttons button {\r\n    padding: 10px 20px;\r\n    margin: 0 5px;\r\n    font-size: 16px;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    background-color: #007bff;\r\n    color: #fff;\r\n  }\r\n  \r\n  .switch-buttons button.active {\r\n    background-color: #0056b3;\r\n  }\r\n  \r\n  h2 {\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .form-group {\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  label {\r\n    display: block;\r\n    margin-bottom: 5px;\r\n  }\r\n  \r\n  input[type=\"text\"],\r\n  input[type=\"password\"],\r\n  input[type=\"number\"] {\r\n    width: 100%;\r\n    padding: 8px;\r\n    font-size: 16px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  .captcha-container {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  \r\n  .captcha {\r\n    margin-left: 10px;\r\n    padding: 5px;\r\n    font-size: 18px;\r\n    background-color: #f0f0f0;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    width: 100px; /* 与输入框宽度一致 */\r\n    height: 30px; /* 与输入框高度一致 */\r\n  }\r\n  \r\n  button[type=\"submit\"] {\r\n    width: 100%;\r\n    padding: 10px;\r\n    margin-top: 10px;\r\n    font-size: 16px;\r\n    color: #fff;\r\n    background-color: #007bff;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  button[type=\"button\"] {\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  background-color: #007bff;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n  \r\n  button[type=\"submit\"]:hover,\r\n  button[type=\"button\"]:hover {\r\n    background-color: #0056b3;\r\n  }\r\n  \r\n  .error-msg,\r\n  .success-msg {\r\n    color: #ff0000;\r\n    margin-top: 10px;\r\n  }\r\n  .success-msg {\r\n    color: green;\r\n  }\r\n  </style>\r\n  "]}]}